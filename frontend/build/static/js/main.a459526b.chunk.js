(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{38:function(e,t,n){},57:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(32),r=n.n(c),o=(n(38),n(10)),i=n(11),l=n(13),j=n(12),u=n(9),h=n.n(u),d=(n(57),n(8)),b=n(0),p=function(e){var t=e.user;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(d.b,{to:"user/".concat(t.id),children:t.username})}),Object(b.jsx)("td",{children:t.first_name}),Object(b.jsx)("td",{children:t.last_name}),Object(b.jsx)("td",{children:t.email}),Object(b.jsx)("td",{children:t.is_staff.toString()}),Object(b.jsx)("td",{children:t.is_superuser.toString()})]})},x=function(e){var t=e.users;return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"User Name"}),Object(b.jsx)("th",{children:"First name"}),Object(b.jsx)("th",{children:"Last Name"}),Object(b.jsx)("th",{children:"Email"}),Object(b.jsx)("th",{children:"Staff"}),Object(b.jsx)("th",{children:"SuperUser"}),t.map((function(e){return Object(b.jsx)(p,{user:e})}))]})},O=function(e){var t=e.project,n=e.deleteProject;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.name}),Object(b.jsx)("td",{children:t.link}),Object(b.jsx)("td",{children:t.users}),Object(b.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})]})},f=function(e){var t=e.projects,n=e.deleteProject;return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"Name"}),Object(b.jsx)("th",{children:"Link"}),Object(b.jsx)("th",{children:"Users"}),Object(b.jsx)("th",{}),t.map((function(e){return Object(b.jsx)(O,{project:e,deleteProject:n})}))]})},v=n(2),m=function(e){var t=e.project;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.name}),Object(b.jsx)("td",{children:t.link}),Object(b.jsx)("td",{children:t.users})]})},g=function(e){var t=e.projects,n=Object(v.g)().id,a=t.filter((function(e){return e.users.includes(parseInt(n))}));return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"Name"}),Object(b.jsx)("th",{children:"Link"}),Object(b.jsx)("th",{children:"Users"}),a.map((function(e){return Object(b.jsx)(m,{project:e})}))]})},k=function(e){var t=e.todo,n=e.deleteToDo;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.text}),Object(b.jsx)("td",{children:t.project}),Object(b.jsx)("td",{children:t.created}),Object(b.jsx)("td",{children:t.updated}),Object(b.jsx)("td",{children:t.user}),Object(b.jsx)("td",{children:t.is_active}),Object(b.jsx)("button",{onClick:function(){return n(t)},type:"button",children:"Delete"})]})},y=function(e){var t=e.todos,n=e.deleteToDo;return Object(b.jsxs)("table",{children:[Object(b.jsx)("th",{children:"Text"}),Object(b.jsx)("th",{children:"Project"}),Object(b.jsx)("th",{children:"Created"}),Object(b.jsx)("th",{children:"Updated"}),Object(b.jsx)("th",{children:"User"}),Object(b.jsx)("th",{children:"Active"}),Object(b.jsx)("th",{}),t.map((function(e){return Object(b.jsx)(k,{todo:e,deleteToDo:n})}))]})},C=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{className:"m-0 text-center text-white",children:"List of users"}),Object(b.jsx)("hr",{})]})},_=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("hr",{}),Object(b.jsx)("p",{className:"m-0 text-center text-white",children:"Copyright \xa9 GeekShop 2021"})]})},S=n(15),N=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={login:"",password:""},a}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){console.log(this.state.login+" "+this.state.password),this.props.get_token(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(s.a.Component),D=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={name:"",link:"",users:[]},a}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleUserChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.link,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsx)("input",{type:"text",name:"name",placeholder:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("input",{type:"text",name:"link",placeholder:"link",value:this.state.link,onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("select",{multiple:!0,name:"users",onChange:function(t){return e.handleUserChange(t)},children:this.props.users.map((function(e){return Object(b.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]})}))}),Object(b.jsx)("input",{type:"submit",value:"Create"})]})}}]),n}(s.a.Component),w=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={text:"",project:0,user:0,is_active:!0},a}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createToDo(this.state.text,this.state.project,this.state.user,this.state.is_active),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(b.jsx)("input",{type:"text",name:"text",placeholder:"text",value:this.state.name,onChange:function(t){return e.handleChange(t)}}),Object(b.jsx)("select",{name:"project",onChange:function(t){return e.handleChange(t)},children:this.props.projects.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.name})}))}),Object(b.jsx)("select",{name:"user",onChange:function(t){return e.handleChange(t)},children:this.props.users.map((function(e){return Object(b.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]})}))}),Object(b.jsx)("input",{type:"submit",value:"Create"})]})}}]),n}(s.a.Component),T=function(e){var t=e.term,n=e.data,a=e.update;return Object(b.jsx)("div",{className:"searchbar form-group",children:Object(b.jsx)("input",{value:t,type:"text",className:"form-control",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",onChange:function(e){var t=e.target.value,s=n.filter((function(e){return e.name.includes(t)}));a({data:s,active:0,term:t})}})})},P=n(18),L=(n(64),n(65),function(e){var t=e.location;return Object(b.jsx)("div",{children:Object(b.jsxs)("h1",{children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 '",t.pathname,"' \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"]})})}),U=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={users:[],projects:[],todos:[],token:"",term:""},a}return Object(i.a)(n,[{key:"is_auth",value:function(){return!!this.state.token}},{key:"get_token_from_storage",value:function(){var e=new P.a;this.setState({token:e.get("token")},this.get_data)}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json",Accept:"application/json; version=v2"},t=new P.a;return e.Authorization="Token "+t.get("token"),e}},{key:"get_data",value:function(){var e=this,t=this.get_headers();h.a.get("http://127.0.0.1:8000/api/users",{headers:t}).then((function(t){var n=t.data.results;e.setState({users:n})})).catch((function(t){e.setState({users:[]}),console.log(t)})),h.a.get("http://127.0.0.1:8000/api/projects",{headers:t}).then((function(t){var n=t.data.results;e.setState({projects:n})})).catch((function(t){e.setState({projects:[]}),console.log(t)})),h.a.get("http://127.0.0.1:8000/api/todos",{headers:t}).then((function(t){var n=t.data.results;e.setState({todos:n})})).catch((function(t){e.setState({todos:[]}),console.log(t)}))}},{key:"get_token",value:function(e,t){var n=this;console.log(e,t),h.a.post("http://127.0.0.1:8000/api-token-auth/",{username:e,password:t}).then((function(e){(new P.a).set("token",e.data.token),n.setState({token:e.data.token},n.get_data)})).catch((function(e){return console.log(e)}))}},{key:"logout",value:function(){(new P.a).set("token",""),this.setState({token:""},this.get_data)}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{children:[Object(b.jsx)(C,{}),Object(b.jsxs)(d.a,{children:[Object(b.jsx)("header",{children:Object(b.jsxs)("nav",{className:"navbar navbar-expand-md navbar-dark fixed-top bg-dark",children:[Object(b.jsx)("a",{className:"navbar-brand",href:"#",children:"DRF"}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsx)("div",{className:"collapse navbar-collapse",id:"navbarCollapse",children:Object(b.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(b.jsx)("li",{className:"nav-item active",children:Object(b.jsx)(d.b,{className:"nav-link",to:"/",children:"Users"})}),Object(b.jsx)("li",{className:"nav-item active",children:Object(b.jsx)(d.b,{className:"nav-link",to:"/projects",children:"Projects"})}),Object(b.jsx)("li",{className:"nav-item active",children:Object(b.jsx)(d.b,{className:"nav-link",to:"/todos",children:"ToDos"})}),Object(b.jsx)("li",{className:"nav-item active",children:this.is_auth()?Object(b.jsx)("a",{className:"nav-link",onClick:function(){return e.logout()},children:"Logout"}):Object(b.jsx)(d.b,{className:"nav-link",to:"/login",children:"Login"})})]})}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-sm-12",children:Object(b.jsx)(T,{term:this.state.term,data:this.state.projects,update:this.updateData.bind(this)})})})]})}),Object(b.jsxs)(v.d,{children:[Object(b.jsx)(v.b,{exact:!0,path:"/",component:function(){return Object(b.jsx)(x,{users:e.state.users})}}),Object(b.jsx)(v.b,{exact:!0,path:"/projects",component:function(){return Object(b.jsx)(f,{projects:e.state.projects,todos:e.state.todos,deleteProject:function(t){return e.deleteProject(t)}})}}),Object(b.jsx)(v.b,{exact:!0,path:"/projects/create",component:function(){return Object(b.jsx)(D,{users:e.state.users,createProject:function(t,n,a){return e.createProject(t,n,a)}})}}),Object(b.jsx)(v.b,{exact:!0,path:"/todos",component:function(){return Object(b.jsx)(y,{todos:e.state.todos,deleteToDo:function(t){return e.deleteToDo(t)}})}}),Object(b.jsx)(v.b,{exact:!0,path:"/todos/create",component:function(){return Object(b.jsx)(w,{users:e.state.users,projects:e.state.projects,createToDo:function(t,n,a,s){return e.createToDo(t,n,a,s)}})}}),Object(b.jsx)(v.b,{exact:!0,path:"/login",component:function(){return Object(b.jsx)(N,{get_token:function(t,n){return e.get_token(t,n)}})}}),Object(b.jsx)(v.b,{path:"/user/:id",children:Object(b.jsx)(g,{projects:this.state.projects})}),Object(b.jsx)(v.a,{from:"/users",to:"/"}),Object(b.jsx)(v.b,{component:L})]})]}),Object(b.jsx)(_,{})]})}},{key:"deleteProject",value:function(e){var t=this,n=this.get_headers();h.a.delete("http://127.0.0.1:8000/api/projects/".concat(e,"/"),{headers:n}).then((function(e){t.get_data()})).catch((function(e){return console.log(e)}))}},{key:"deleteToDo",value:function(e){var t=this,n=this.get_headers();h.a.put("http://127.0.0.1:8000/api/todos/".concat(e.id,"/"),e,{headers:n}).then((function(e){t.setState({is_active:!1},t.get_data)})).catch((function(e){return console.log(e)}))}},{key:"createProject",value:function(e,t,n){var a=this;if(e&&t&&0!==n.length){var s=this.get_headers();h.a.post("http://127.0.0.1:8000/api/projects/",{name:e,link:t,users:n},{headers:s}).then((function(e){a.get_data()})).catch((function(e){console.log(e)}))}else console.log("Empty params:",e,t,n)}},{key:"createToDo",value:function(e,t,n){var a=this;if(e&&t&&n){var s=this.get_headers();h.a.post("http://127.0.0.1:8000/api/todos/",{text:e,project:t,user:n,is_active:!0},{headers:s}).then((function(e){a.get_data()})).catch((function(e){console.log(e)}))}else console.log("Empty params:",e,t,n)}},{key:"updateData",value:function(e){this.setState({projects:e.data,term:e.term})}}]),n}(s.a.Component),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(U,{})}),document.getElementById("root")),F()}},[[66,1,2]]]);
//# sourceMappingURL=main.a459526b.chunk.js.map